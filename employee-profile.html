<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Contractuel - EmpManager</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bibliothèque pour générer des PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Styles spécifiques pour l'espace contractuel */
        .employee-space {
            min-height: 100vh;
            background: var(--bg-primary);
            display: flex;
        }

        /* Sidebar employé */
        .employee-sidebar {
            width: 280px;
            background: var(--ink-black);
            color: var(--soft-white);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .employee-sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .employee-sidebar-header i {
            font-size: 3rem;
            color: var(--terracotta);
            margin-bottom: 1rem;
        }

        .employee-sidebar-header h2 {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .employee-sidebar-header p {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        .employee-nav {
            flex: 1;
            padding: 1.5rem 0;
        }

        .employee-nav-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 1rem;
            font-family: inherit;
        }

        .employee-nav-item:hover {
            background: rgba(255,255,255,0.05);
            color: var(--soft-white);
        }

        .employee-nav-item.active {
            background: rgba(196, 69, 54, 0.2);
            color: var(--soft-white);
            border-left: 4px solid var(--terracotta);
        }

        .employee-nav-item i {
            width: 24px;
            text-align: center;
        }

        .employee-sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* Contenu principal */
        .employee-main {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
            overflow-y: auto;
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 3px solid var(--ink-black);
        }

        .employee-header h1 {
            font-size: 2.5rem;
            color: var(--text-primary);
        }

        .employee-header p {
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Sections */
        .employee-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .employee-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards d'informations */
        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .info-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--light-gray);
        }

        .info-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .info-card-header i {
            font-size: 1.5rem;
            color: var(--terracotta);
        }

        .info-card-header h3 {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .info-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Formulaire de profil */
        .profile-form-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--light-gray);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--ink-black);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .form-section-title i {
            color: var(--terracotta);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        /* Section congés */
        .leave-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .leave-stat-card {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--light-gray);
        }

        .leave-stat-card h4 {
            font-size: 2rem;
            color: var(--terracotta);
            margin-bottom: 0.5rem;
        }

        .leave-stat-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Table des congés */
        .leaves-table-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--light-gray);
        }

        /* Modal demande de congé */
        .leave-form-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--light-gray);
        }

        /* Desktop - Grands écrans (>992px) */
        @media (min-width: 993px) {
            .employee-sidebar {
                position: fixed;
                left: 0;
                width: 280px;
            }

            .employee-main {
                margin-left: 280px;
            }

            .mobile-toggle {
                display: none !important;
            }

            .sidebar-overlay {
                display: none !important;
            }
        }

        /* Responsive - Tablettes et mobiles */
        @media (max-width: 992px) {
            .employee-sidebar {
                position: fixed;
                width: 280px;
                left: -280px;
                transition: left 0.3s ease;
            }

            .employee-sidebar.open {
                left: 0;
            }

            .employee-main {
                margin-left: 0;
            }

            .mobile-toggle {
                display: block !important;
            }

            .sidebar-overlay {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .leave-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .info-cards {
                grid-template-columns: 1fr;
            }
        }

        .mobile-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 200;
            background: var(--ink-black);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
        }

        /* Styles pour les champs de téléchargement de fichiers */
        .file-upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            border: 2px dashed var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--bg-primary);
            text-align: center;
        }

        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--light-gray);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 3px solid var(--terracotta);
        }

        .photo-preview i {
            font-size: 3rem;
            color: var(--text-secondary);
        }

        .photo-preview span {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .file-preview {
            width: 100%;
            padding: 1rem;
            background: var(--light-gray);
            border-radius: var(--radius-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .file-preview i {
            font-size: 2rem;
            color: var(--terracotta);
        }

        .file-preview span {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .file-preview.has-file {
            background: #d1fae5;
            border: 1px solid #10b981;
        }

        .file-preview.has-file i {
            color: #059669;
        }

        .file-preview.has-file span {
            color: #059669;
            font-weight: 600;
        }

        .file-hint {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* Style pour l'info de retraite */
        .retirement-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 6px;
            font-size: 0.85rem;
            color: #1e40af;
        }

        .retirement-info i {
            color: #3b82f6;
        }

        /* Style pour les champs en erreur */
        .input-error {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
        }

        .input-error:focus {
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2) !important;
        }

        /* ================================
           STYLES CNPS - Fiche Employé
           ================================ */
        .cnps-card {
            background: #ffffff;
            border-radius: 0;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid #d0d0d0;
        }

        .cnps-section-header {
            background: linear-gradient(180deg, #2e7d32 0%, #1b5e20 100%);
            color: white;
            padding: 0.6rem 1rem;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .cnps-section-header i {
            font-size: 1rem;
        }

        /* Layout avec photo à droite */
        .cnps-content-wrapper {
            display: flex;
            background: #ffffff;
        }

        .cnps-info-left {
            flex: 1;
        }

        .cnps-photo-right {
            width: 160px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-left: 1px solid #e0e0e0;
        }

        .cnps-photo {
            width: 120px;
            height: 150px;
            border: 2px solid #9e9e9e;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
        }

        .cnps-photo i {
            font-size: 4rem;
            color: #bdbdbd;
        }

        .cnps-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cnps-photo-matricule {
            margin-top: 0.5rem;
            font-weight: 700;
            color: #333;
            font-size: 0.85rem;
        }

        /* Lignes avec alternance de couleurs */
        .cnps-row {
            display: flex;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #e8e8e8;
            background: #ffffff;
        }

        .cnps-row.alt {
            background: #f0f0f0;
        }

        .cnps-row:last-child {
            border-bottom: none;
        }

        .cnps-label {
            font-weight: 600;
            color: #333;
            min-width: 180px;
            flex-shrink: 0;
        }

        .cnps-value {
            color: #c44536;
            font-weight: 600;
            flex: 1;
        }

        .cnps-retirement {
            color: #ff6f00;
            font-weight: 700;
        }

        .cnps-highlight {
            color: #2e7d32;
            font-weight: 700;
        }

        /* Deux colonnes */
        .cnps-two-columns {
            display: flex;
            background: #ffffff;
        }

        .cnps-column {
            flex: 1;
        }

        .cnps-column:first-child {
            border-right: 1px solid #e0e0e0;
        }

        /* Tableau de données (Liste des enfants) */
        .cnps-data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .cnps-data-table thead {
            background: linear-gradient(180deg, #757575 0%, #616161 100%);
        }

        .cnps-data-table th {
            padding: 0.6rem 1rem;
            text-align: left;
            font-weight: 600;
            color: white;
            font-size: 0.85rem;
        }

        .cnps-data-table tbody td {
            padding: 0.6rem 1rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .cnps-no-data {
            text-align: center !important;
            color: #e53935;
            font-weight: 700;
            padding: 1.5rem !important;
            font-size: 0.95rem;
        }

        /* Documents grid */
        .cnps-docs-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding: 1rem;
        }

        .cnps-doc-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 1rem;
            background: #f5f5f5;
            border: 1px solid #e0e0e0;
            text-align: center;
        }

        .cnps-doc-item .cnps-label {
            min-width: auto;
            text-align: center;
        }

        .cnps-doc-value {
            display: flex;
            justify-content: center;
        }

        .cnps-no-doc {
            color: #e53935;
            font-weight: 600;
            font-size: 0.85rem;
        }

        /* Responsive pour CNPS */
        @media (max-width: 992px) {
            .cnps-two-columns {
                flex-direction: column;
            }

            .cnps-column:first-child {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }

            .cnps-content-wrapper {
                flex-direction: column-reverse;
            }

            .cnps-photo-right {
                width: 100%;
                border-left: none;
                border-bottom: 1px solid #e0e0e0;
                padding: 1rem;
            }

            .cnps-docs-grid {
                grid-template-columns: 1fr;
            }

            .cnps-label {
                min-width: 140px;
            }
        }

        /* Responsive pour tablettes */
        @media (max-width: 768px) {
            .employee-main {
                padding: 1rem;
            }

            .employee-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
                padding-bottom: 1rem;
                margin-bottom: 1.5rem;
            }

            .employee-header h1 {
                font-size: 1.75rem;
            }

            .employee-header p {
                font-size: 0.9rem;
            }

            #downloadProfileBtn {
                width: 100%;
                justify-content: center;
            }

            .cnps-section-header {
                font-size: 0.8rem;
                padding: 0.5rem 0.75rem;
            }

            .cnps-row {
                flex-direction: column;
                gap: 0.25rem;
                padding: 0.75rem 1rem;
            }

            .cnps-label {
                min-width: auto;
                font-size: 0.8rem;
                color: #666;
            }

            .cnps-value {
                font-size: 0.95rem;
            }

            .cnps-data-table {
                font-size: 0.85rem;
            }

            .cnps-data-table th,
            .cnps-data-table td {
                padding: 0.5rem 0.75rem;
            }

            .leave-stats {
                grid-template-columns: 1fr 1fr;
            }

            .leave-stat-card {
                padding: 1rem;
            }

            .leave-stat-card h4 {
                font-size: 1.5rem;
            }

            .leave-balance-card {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .leave-balance-card > div:last-child {
                text-align: center !important;
            }

            .profile-form-container {
                padding: 1rem;
            }

            .form-section-title {
                font-size: 1rem;
            }

            /* Amélioration du tableau des congés sur mobile */
            .leaves-table-container {
                overflow-x: auto;
            }

            .leaves-table-container .data-table {
                min-width: 600px;
            }
        }

        /* Responsive pour mobiles */
        @media (max-width: 576px) {
            .mobile-toggle {
                top: 0.5rem;
                left: 0.5rem;
                padding: 0.5rem 0.75rem;
            }

            .employee-main {
                padding: 0.75rem;
                padding-top: 3.5rem;
            }

            .employee-header {
                margin-bottom: 1rem;
            }

            .employee-header h1 {
                font-size: 1.5rem;
            }

            .cnps-card {
                margin-bottom: 1rem;
            }

            .cnps-section-header {
                font-size: 0.75rem;
                padding: 0.4rem 0.6rem;
            }

            .cnps-section-header i {
                font-size: 0.85rem;
            }

            .cnps-photo {
                width: 100px;
                height: 125px;
            }

            .cnps-photo i {
                font-size: 3rem;
            }

            .cnps-photo-matricule {
                font-size: 0.75rem;
            }

            .cnps-row {
                padding: 0.6rem 0.75rem;
            }

            .cnps-label {
                font-size: 0.75rem;
            }

            .cnps-value {
                font-size: 0.9rem;
            }

            .cnps-data-table th {
                font-size: 0.7rem;
                padding: 0.4rem 0.5rem;
            }

            .cnps-data-table td {
                font-size: 0.8rem;
                padding: 0.4rem 0.5rem;
            }

            .leave-stats {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .leave-stat-card {
                padding: 0.75rem;
            }

            .leave-stat-card h4 {
                font-size: 1.25rem;
            }

            .leave-stat-card p {
                font-size: 0.8rem;
            }

            .form-grid {
                gap: 1rem;
            }

            .form-group label {
                font-size: 0.85rem;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 0.75rem;
                font-size: 0.9rem;
            }

            .file-upload-container {
                padding: 0.75rem;
            }

            .photo-preview {
                width: 100px;
                height: 100px;
            }

            .btn {
                padding: 0.75rem 1.25rem;
                font-size: 0.85rem;
            }

            .btn-sm {
                padding: 0.5rem 0.75rem;
                font-size: 0.75rem;
            }

            /* Navigation mobile */
            .employee-sidebar {
                width: 260px;
                left: -260px;
            }

            .employee-sidebar.open {
                left: 0;
            }

            .employee-sidebar-header {
                padding: 1.5rem 1rem;
            }

            .employee-sidebar-header i {
                font-size: 2rem;
            }

            .employee-sidebar-header h2 {
                font-size: 1.25rem;
            }

            .employee-nav-item {
                padding: 0.875rem 1rem;
                font-size: 0.9rem;
            }

            /* Boutons d'action du formulaire */
            .profile-form-container form > div:last-child {
                flex-direction: column;
            }

            .profile-form-container form > div:last-child button {
                width: 100%;
            }

            /* Section demande de congé */
            #requestLeaveSection .form-grid > div[style*="grid-column"] {
                grid-column: span 1 !important;
            }

            .leave-form-container form > div:last-child {
                flex-direction: column;
            }

            .leave-form-container form > div:last-child button {
                width: 100%;
            }
        }

        /* Amélioration de l'accessibilité tactile */
        @media (hover: none) and (pointer: coarse) {
            .employee-nav-item {
                padding: 1rem 1.5rem;
            }

            .btn {
                min-height: 44px;
            }

            .action-btn {
                padding: 0.6rem 1rem;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-toggle" id="mobileToggle">
        <i class="fas fa-bars"></i>
    </button>

    <div class="employee-space">
        <!-- Overlay pour fermer le menu sur mobile -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar -->
        <aside class="employee-sidebar" id="employeeSidebar">
            <div class="employee-sidebar-header">
                <i class="fas fa-id-card-alt"></i>
                <h2>Espace Contractuel</h2>
                <p id="employeeName">Chargement...</p>
            </div>

            <nav class="employee-nav">
                <button class="employee-nav-item active" data-section="profile">
                    <i class="fas fa-user"></i>
                    <span>Mon Profil</span>
                </button>
                <button class="employee-nav-item" data-section="edit-profile">
                    <i class="fas fa-edit"></i>
                    <span>Modifier mon profil</span>
                </button>
                <button class="employee-nav-item" data-section="leaves">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Mes Congés</span>
                </button>
                <button class="employee-nav-item" data-section="request-leave">
                    <i class="fas fa-plus-circle"></i>
                    <span>Demander un congé</span>
                </button>
            </nav>

            <div class="employee-sidebar-footer">
                <button class="btn btn-danger btn-block" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    Déconnexion
                </button>
            </div>
        </aside>

        <!-- Contenu principal -->
        <main class="employee-main">
            <!-- Section: Mon Profil - Style CNPS -->
            <section class="employee-section active" id="profileSection">
                <div class="employee-header">
                    <div>
                        <h1>Mon Profil</h1>
                        <p>Consultez vos informations contractuelles</p>
                    </div>
                    <button class="btn btn-success" id="downloadProfileBtn">
                        <i class="fas fa-download"></i>
                        Télécharger mon profil
                    </button>
                </div>

                <!-- INFORMATIONS GÉNÉRALES -->
                <div class="cnps-card">
                    <div class="cnps-section-header">
                        <i class="fas fa-user"></i>
                        INFORMATIONS GÉNÉRALES
                    </div>
                    <div class="cnps-content-wrapper">
                        <!-- Informations à gauche -->
                        <div class="cnps-info-left">
                            <div class="cnps-row">
                                <span class="cnps-label">Matricule :</span>
                                <span class="cnps-value" id="viewMatricule">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Nom et Prénoms :</span>
                                <span class="cnps-value" id="viewFullName">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Date de Naissance :</span>
                                <span class="cnps-value" id="viewBirthDate">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Lieu de Naissance :</span>
                                <span class="cnps-value" id="viewBirthPlace">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Âge actuel :</span>
                                <span class="cnps-value" id="viewAge">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Année de Retraite :</span>
                                <span class="cnps-value cnps-retirement" id="viewRetirementYear">-</span>
                            </div>
                        </div>
                        <!-- Photo à droite -->
                        <div class="cnps-photo-right">
                            <div class="cnps-photo" id="viewPhotoImg">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="cnps-photo-matricule" id="viewPhotoMatricule">-</div>
                        </div>
                    </div>

                    <!-- Deuxième partie des infos générales - 2 colonnes -->
                    <div class="cnps-two-columns">
                        <div class="cnps-column">
                            <div class="cnps-row alt">
                                <span class="cnps-label">Sexe :</span>
                                <span class="cnps-value" id="viewGender">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Numéro CNPS :</span>
                                <span class="cnps-value" id="viewCNPS">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Téléphone :</span>
                                <span class="cnps-value" id="viewPhone">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Ville :</span>
                                <span class="cnps-value" id="viewCity">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Situation Famille :</span>
                                <span class="cnps-value" id="viewMaritalStatus">-</span>
                            </div>
                        </div>
                        <div class="cnps-column">
                            <div class="cnps-row alt">
                                <span class="cnps-label">Email :</span>
                                <span class="cnps-value" id="viewEmail">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Commune :</span>
                                <span class="cnps-value" id="viewCommune">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Nombre d'enfant :</span>
                                <span class="cnps-value" id="viewChildren">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- EMPLOI -->
                <div class="cnps-card">
                    <div class="cnps-section-header">
                        <i class="fas fa-briefcase"></i>
                        EMPLOI
                    </div>
                    <div class="cnps-two-columns">
                        <div class="cnps-column">
                            <div class="cnps-row">
                                <span class="cnps-label">Entreprise :</span>
                                <span class="cnps-value" id="viewCompany">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Direction :</span>
                                <span class="cnps-value" id="viewDirection">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Lieu de Travail :</span>
                                <span class="cnps-value" id="viewCity2">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Emploi :</span>
                                <span class="cnps-value" id="viewPosition">-</span>
                            </div>
                        </div>
                        <div class="cnps-column">
                            <div class="cnps-row">
                                <span class="cnps-label">Date d'embauche :</span>
                                <span class="cnps-value" id="viewHireDate">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Salaire :</span>
                                <span class="cnps-value" id="viewSalary">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ETAT AGENT -->
                <div class="cnps-card">
                    <div class="cnps-section-header">
                        <i class="fas fa-flag"></i>
                        ETAT AGENT
                    </div>
                    <div class="cnps-two-columns">
                        <div class="cnps-column">
                            <div class="cnps-row">
                                <span class="cnps-label">Date prise de service :</span>
                                <span class="cnps-value" id="viewServiceDate">-</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Date de départ à la retraite :</span>
                                <span class="cnps-value" id="viewRetirementDate">-</span>
                            </div>
                            <div class="cnps-row">
                                <span class="cnps-label">Etat :</span>
                                <span class="cnps-value" id="viewStatus">-</span>
                            </div>
                        </div>
                        <div class="cnps-column">
                            <div class="cnps-row">
                                <span class="cnps-label">Solde Congés :</span>
                                <span class="cnps-value cnps-highlight" id="viewLeaveBalance">30 jours</span>
                            </div>
                            <div class="cnps-row alt">
                                <span class="cnps-label">Congés Pris :</span>
                                <span class="cnps-value" id="viewLeavesTaken">0 jours</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DOCUMENTS D'IDENTITÉ -->
                <div class="cnps-card">
                    <div class="cnps-section-header">
                        <i class="fas fa-id-card"></i>
                        DOCUMENTS D'IDENTITÉ
                    </div>
                    <div class="cnps-docs-grid">
                        <div class="cnps-doc-item">
                            <span class="cnps-label">Photo d'identité</span>
                            <span class="cnps-doc-value" id="viewPhoto">
                                <span class="cnps-no-doc">Non téléchargée</span>
                            </span>
                        </div>
                        <div class="cnps-doc-item">
                            <span class="cnps-label">CNI - Recto</span>
                            <span class="cnps-doc-value" id="viewCniRecto">
                                <span class="cnps-no-doc">Non téléchargé</span>
                            </span>
                        </div>
                        <div class="cnps-doc-item">
                            <span class="cnps-label">CNI - Verso</span>
                            <span class="cnps-doc-value" id="viewCniVerso">
                                <span class="cnps-no-doc">Non téléchargé</span>
                            </span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Modifier mon profil -->
            <section class="employee-section" id="editProfileSection">
                <div class="employee-header">
                    <div>
                        <h1>Modifier mon profil</h1>
                        <p>Mettez à jour vos informations personnelles</p>
                    </div>
                </div>

                <div class="profile-form-container">
                    <form id="employeeProfileForm">
                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i class="fas fa-user"></i>
                                Informations personnelles
                            </h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="lastName">Nom *</label>
                                    <input type="text" id="lastName" placeholder="Ex: OUATTARA" required>
                                </div>
                                <div class="form-group">
                                    <label for="firstName">Prénom *</label>
                                    <input type="text" id="firstName" placeholder="Ex: Peyila Al Hassane" required>
                                </div>
                                <div class="form-group">
                                    <label for="birthDate">Date de naissance *</label>
                                    <input type="date" id="birthDate" placeholder="JJ/MM/AAAA" required>
                                    <!-- Info retraite (s'affiche après saisie de la date) -->
                                    <div id="retirementInfo" class="retirement-info" style="display: none;">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Âge: <strong id="currentAge">-</strong> ans | Retraite en <strong id="retirementYear">-</strong></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="gender">Sexe *</label>
                                    <select id="gender" required>
                                        <option value="">Sélectionnez...</option>
                                        <option value="male">Masculin</option>
                                        <option value="female">Féminin</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="maritalStatus">Situation matrimoniale *</label>
                                    <select id="maritalStatus" required>
                                        <option value="">Sélectionnez...</option>
                                        <option value="single">Célibataire</option>
                                        <option value="married">Marié(e)</option>
                                        <option value="divorced">Divorcé(e)</option>
                                        <option value="widowed">Veuf/Veuve</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="numberOfChildren">Nombre d'enfants *</label>
                                    <input type="number" id="numberOfChildren" min="0" value="0" placeholder="Ex: 2" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i class="fas fa-address-book"></i>
                                Coordonnées
                            </h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" placeholder="Ex: prenom.nom@email.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Téléphone *</label>
                                    <input type="tel" id="phone" placeholder="Ex: 07 08 09 10 11" required>
                                </div>
                                <div class="form-group">
                                    <label for="city">Ville *</label>
                                    <input type="text" id="city" placeholder="Ex: Abidjan" required>
                                </div>
                                <div class="form-group">
                                    <label for="commune">Commune *</label>
                                    <input type="text" id="commune" placeholder="Ex: Cocody" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i class="fas fa-briefcase"></i>
                                Informations professionnelles
                            </h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="company">Entreprise *</label>
                                    <select id="company" required>
                                        <option value="">Sélectionnez...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="direction">Direction *</label>
                                    <select id="direction" required>
                                        <option value="">Sélectionnez...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="position">Poste *</label>
                                    <input type="text" id="position" placeholder="Ex: Agent de sécurité" required>
                                </div>
                                <div class="form-group">
                                    <label for="hireDate">Date d'embauche *</label>
                                    <input type="date" id="hireDate" placeholder="JJ/MM/AAAA" required>
                                </div>
                                <div class="form-group">
                                    <label for="salary">Salaire (FCFA) *</label>
                                    <input type="number" id="salary" min="0" placeholder="Ex: 150000" required>
                                </div>
                                <div class="form-group">
                                    <label for="matricule">Matricule *</label>
                                    <input type="text" id="matricule" placeholder="Ex: MAT-001" required>
                                </div>
                                <div class="form-group">
                                    <label for="cnpsNumber">Numéro CNPS *</label>
                                    <input type="text" id="cnpsNumber" placeholder="Ex: 1234567890" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i class="fas fa-id-card"></i>
                                Documents d'identité
                            </h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="photo">Photo d'identité</label>
                                    <div class="file-upload-container">
                                        <div class="photo-preview" id="photoPreview">
                                            <i class="fas fa-user-circle"></i>
                                            <span>Aucune photo</span>
                                        </div>
                                        <input type="file" id="photo" accept="image/*" style="display: none;">
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('photo').click()">
                                            <i class="fas fa-camera"></i>
                                            Choisir une photo
                                        </button>
                                        <p class="file-hint">Format: JPG, PNG (max 2 Mo)</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="cniRecto">CNI - Recto</label>
                                    <div class="file-upload-container">
                                        <div class="file-preview" id="cniRectoPreview">
                                            <i class="fas fa-id-card"></i>
                                            <span>Aucun document</span>
                                        </div>
                                        <input type="file" id="cniRecto" accept="image/*,.pdf" style="display: none;">
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('cniRecto').click()">
                                            <i class="fas fa-upload"></i>
                                            Télécharger le Recto
                                        </button>
                                        <p class="file-hint">Format: JPG, PNG, PDF (max 5 Mo)</p>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="cniVerso">CNI - Verso</label>
                                    <div class="file-upload-container">
                                        <div class="file-preview" id="cniVersoPreview">
                                            <i class="fas fa-id-card"></i>
                                            <span>Aucun document</span>
                                        </div>
                                        <input type="file" id="cniVerso" accept="image/*,.pdf" style="display: none;">
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('cniVerso').click()">
                                            <i class="fas fa-upload"></i>
                                            Télécharger le Verso
                                        </button>
                                        <p class="file-hint">Format: JPG, PNG, PDF (max 5 Mo)</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" id="employeeId">

                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                            <button type="button" class="btn btn-secondary" onclick="switchSection('profile')">
                                Annuler
                            </button>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-save"></i>
                                Enregistrer les modifications
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Section: Mes Congés -->
            <section class="employee-section" id="leavesSection">
                <div class="employee-header">
                    <div>
                        <h1>Mes Congés</h1>
                        <p>Consultez l'historique de vos demandes de congés</p>
                    </div>
                    <button class="btn btn-success" onclick="switchSection('request-leave')">
                        <i class="fas fa-plus"></i>
                        Nouvelle demande
                    </button>
                </div>

                <div class="leave-stats">
                    <div class="leave-stat-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white;">
                        <h4 id="leaveBalance">30</h4>
                        <p style="color: rgba(255,255,255,0.9);">Jours restants</p>
                    </div>
                    <div class="leave-stat-card">
                        <h4 id="leavesTaken">0</h4>
                        <p>Jours pris</p>
                    </div>
                    <div class="leave-stat-card">
                        <h4 id="pendingLeaves">0</h4>
                        <p>En attente</p>
                    </div>
                    <div class="leave-stat-card">
                        <h4 id="totalLeaves">0</h4>
                        <p>Total demandes</p>
                    </div>
                </div>

                <div class="leaves-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Date début</th>
                                <th>Date fin</th>
                                <th>Jours</th>
                                <th>Raison</th>
                                <th>Statut</th>
                            </tr>
                        </thead>
                        <tbody id="leavesTableBody">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 2rem;">
                                    Aucune demande de congé
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Demander un congé -->
            <section class="employee-section" id="requestLeaveSection">
                <div class="employee-header">
                    <div>
                        <h1>Demander un congé</h1>
                        <p>Soumettez une nouvelle demande de congé</p>
                    </div>
                </div>

                <!-- Carte du solde de congés -->
                <div class="leave-balance-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">Votre solde de congés payés</p>
                        <h2 style="margin: 0.5rem 0 0 0; font-size: 2rem;"><span id="leaveBalanceForm">30</span> jours</h2>
                    </div>
                    <div style="text-align: right;">
                        <p style="margin: 0; opacity: 0.9; font-size: 0.85rem;">Quota annuel: 30 jours</p>
                        <p style="margin: 0.25rem 0 0 0; opacity: 0.9; font-size: 0.85rem;">Jours pris: <span id="leavesTakenForm">0</span></p>
                    </div>
                </div>

                <div class="leave-form-container">
                    <form id="leaveRequestForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="leaveType">Type de congé *</label>
                                <select id="leaveType" required>
                                    <option value="">Sélectionnez...</option>
                                    <option value="paid">Congé Payé</option>
                                    <option value="sick">Congé Maladie</option>
                                    <option value="unpaid">Congé Sans Solde</option>
                                    <option value="parental">Congé Parental</option>
                                    <option value="other">Autre</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="leaveStartDate">Date de début *</label>
                                <input type="date" id="leaveStartDate" required>
                            </div>
                            <div class="form-group">
                                <label for="leaveEndDate">Date de fin *</label>
                                <input type="date" id="leaveEndDate" required>
                            </div>
                            <div class="form-group" style="grid-column: span 2;">
                                <label for="leaveReason">Raison / Commentaire *</label>
                                <textarea id="leaveReason" rows="4" placeholder="Décrivez la raison de votre demande..." required></textarea>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                            <button type="button" class="btn btn-secondary" onclick="switchSection('leaves')">
                                Annuler
                            </button>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-paper-plane"></i>
                                Soumettre la demande
                            </button>
                        </div>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script src="api-config.js"></script>
    <script src="employee-profile.js"></script>
</body>
</html>
